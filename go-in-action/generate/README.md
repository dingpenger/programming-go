# go-generate

使用 go generate 生成代码

## 示例

使用 go generate 生成枚举类型的字符串转换函数

## 条件

需要安装 stringer

```bash
go install golang.org/x/tools/cmd/stringer@latest
```

代码：

*gender.go*

```go
// gender.go
package generate

//go:generate stringer -type=Gender
type Gender int8

const (
	Female Gender = iota
	Male
	Unknown
)
```

## 生成

```bash
go generate
```

## 结果

会在同一目录下生成 `gender_string.go` 文件

```go
// Code generated by "stringer -type=Gender"; DO NOT EDIT.

package generate

import "strconv"

func _() {
	// An "invalid array index" compiler error signifies that the constant values have changed.
	// Re-run the stringer command to generate them again.
	var x [1]struct{}
	_ = x[Female-0]
	_ = x[Male-1]
	_ = x[Unknown-2]
}

const _Gender_name = "FemaleMaleUnknown"

var _Gender_index = [...]uint8{0, 6, 10, 17}

func (i Gender) String() string {
	if i < 0 || i >= Gender(len(_Gender_index)-1) {
		return "Gender(" + strconv.FormatInt(int64(i), 10) + ")"
	}
	return _Gender_name[_Gender_index[i]:_Gender_index[i+1]]
}
```
